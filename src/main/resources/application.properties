# Server Configuration
server.port=8080
server.servlet.context-path=/

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/lmia_db
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pooling (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Logging Configuration
logging.level.org.springframework=INFO
logging.level.org.hibernate=WARN
logging.level.org.example=DEBUG
logging.level.dataProcessors=DEBUG
logging.level.config.LoggingInterceptor=DEBUG

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# Security Configuration
spring.security.user.name=admin
spring.security.user.password=admin

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true

# Data Update Scheduling Configuration
# Enable/disable automatic data updates (default: disabled for manual control)
app.data-update.enabled=false
# Cron expression for scheduled updates (default: first day of every month at 2:00 AM)
# Format: second minute hour day month weekday
# Examples:
#   "0 0 2 1 * *" - First day of every month at 2:00 AM (recommended for LMIA data)
#   "0 0 2 * * SUN" - Every Sunday at 2:00 AM
#   "0 0 */6 * * *" - Every 6 hours
app.data-update.cron=0 0 2 1 * *
# Optional: Enable data health check (checks data freshness)
app.data-health-check.enabled=false
app.data-health-check.cron=0 0 3 * * *

# Async Download Configuration
# Thread pool size for parallel file downloads (default: 10)
# Increase for faster downloads, but be mindful of server resources and rate limits
app.download.thread-pool-size=10
# Maximum pool size (default: 20)
app.download.max-pool-size=20
# Queue capacity for pending download tasks (default: 100)
app.download.queue-capacity=100

# Automatic Data Initialization on Startup
# Enable/disable automatic data download when application starts (default: disabled)
# When enabled, automatically downloads and processes data if database is empty
# Useful for Docker deployments to populate database on first startup
app.data.auto.load.enabled=false

# Website URL Update Configuration
# Enable/disable automatic website URL discovery for companies (default: disabled)
# When enabled, periodically searches for and stores real company website URLs
# This reduces the need to redirect users to Google search
app.website-url-update.enabled=false
# Cron expression for website URL updates (default: every Sunday at 4:00 AM)
# Format: second minute hour day month weekday
# Examples:
#   "0 0 4 * * SUN" - Every Sunday at 4:00 AM (recommended)
#   "0 0 2 * * *" - Every day at 2:00 AM
#   "0 0 */6 * * *" - Every 6 hours
app.website-url-update.cron=0 0 4 * * SUN
# Number of companies to process per update run (default: 50)
# Lower values reduce load but take longer to process all companies
app.website-url-update.batch-size=50
